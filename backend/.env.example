# ============================================
# openOii Backend Configuration
# ============================================

# ============================================
# 基础设置
# ============================================
APP_NAME=openOii-backend
ENVIRONMENT=dev
LOG_LEVEL=INFO

# ============================================
# 数据库配置
# ============================================
DATABASE_URL=postgresql+asyncpg://openoii:openoii_dev@localhost:5432/openoii

# ============================================
# Redis 配置（用于 confirm 信号共享）
# ============================================
REDIS_URL=redis://localhost:6379/0

# ============================================
# CORS 跨域配置
# ============================================
# JSON 数组格式，多个地址用逗号分隔
CORS_ORIGINS=["http://localhost:15173"]

# ============================================
# LLM 服务配置 (Claude Agent SDK)
# ============================================
# 【方式一】直连 Anthropic（需要国际网络）
# ANTHROPIC_API_KEY=your_anthropic_api_key

# 【方式二】使用中转站（推荐，国内可用）⚠️ 必填其一
# 【必填】中转站地址
ANTHROPIC_BASE_URL=https://your-proxy.example.com
# 【必填】中转站 Token（大部分中转站使用此字段）
ANTHROPIC_AUTH_TOKEN=your_proxy_token
# ANTHROPIC_API_KEY=your_proxy_key  # 部分中转站使用此字段

# 模型名称（如果使用智谱会自动路由到 GLM 模型）
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# ============================================
# 图像生成服务配置 (OpenAI 兼容接口)
# ============================================
# 【必填】图像服务地址和密钥
IMAGE_BASE_URL=https://api.openai.com/v1
IMAGE_API_KEY=your_image_api_key
IMAGE_MODEL=dall-e-3
IMAGE_ENDPOINT=/images/generations

# 图生图开关（使用角色图作为参考图）
# false: 纯文本生图 | true: 图生图（提升人物一致性）
ENABLE_IMAGE_TO_IMAGE=false

# ============================================
# 视频服务提供商选择 ⚠️ 先选择这个！
# ============================================
# 可选值：openai | doubao
# - openai: 使用 OpenAI 兼容接口（需填写下方 VIDEO_* 配置）
# - doubao: 使用豆包视频服务（需填写下方 DOUBAO_* 配置）
VIDEO_PROVIDER=doubao

# ============================================
# 视频生成服务配置 (OpenAI 兼容接口)
# ============================================
# 仅当 VIDEO_PROVIDER=openai 时需要填写
VIDEO_BASE_URL=https://api.example.com/v1
VIDEO_API_KEY=your_video_api_key
VIDEO_MODEL=video-gen-1
VIDEO_ENDPOINT=/videos/generations

# 图生视频开关（使用分镜图+角色图拼接作为参考）
# false: 纯文本生视频 | true: 图生视频（提升人物一致性）
ENABLE_IMAGE_TO_VIDEO=true

# ============================================
# 豆包视频生成服务配置（火山引擎 Ark API）
# ============================================
# 仅当 VIDEO_PROVIDER=doubao 时需要填写
# 【必填】获取地址：https://console.volcengine.com/ark/region:ark+cn-beijing/apikey
DOUBAO_API_KEY=your_doubao_api_key
DOUBAO_VIDEO_MODEL=doubao-seedance-1-5-pro-251215
DOUBAO_VIDEO_DURATION=5                # 可选：5 或 10 秒
DOUBAO_VIDEO_RATIO=adaptive            # 可选：16:9, 9:16, 1:1, adaptive
DOUBAO_GENERATE_AUDIO=true             # 是否生成音频

# 图生视频模式
# first_frame: 仅使用分镜首帧 | reference: 拼接角色图+分镜图
VIDEO_IMAGE_MODE=first_frame

# 本地开发时是否将 /static 图片内联为 data URL
VIDEO_INLINE_LOCAL_IMAGES=true

# ============================================
# 其他设置
# ============================================
REQUEST_TIMEOUT_S=120.0

# 对外可访问的后端地址（用于生成 /static 文件的完整 URL）
# PUBLIC_BASE_URL=http://localhost:18765
